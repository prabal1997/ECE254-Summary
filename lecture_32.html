<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head><meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>lecture_31</title></head><body><h1><span style="font-weight: bold;">File System Interface</span></h1><br><span style="font-weight: bold;">File Attributes: </span>properties that files tend to have:<br><ul><li><span style="font-weight: bold;">Name</span>: symbolic file-name, in human-readable form.</li><li><span style="font-weight: bold;">Identifier:</span> unique identifier identifying filewithin file-system.</li><li><span style="font-weight: bold;">Type:</span> Types of file (directory, data, etc.)</li><li><span style="font-weight: bold;">Location:</span> Physical location (e.g., HDD, SSD, etc.)</li><li><span style="font-weight: bold;">Size:</span> Current, maximum file-size.</li><li><span style="font-weight: bold;">Protection:</span> Access control information</li><li><span style="font-weight: bold;">Time, Data, User ID:</span> Data for usage monitoring, security etc.</li></ul><span style="font-weight: bold;">Links:<br></span><ul><li>A single file can have <span style="font-style: italic;">multiple </span>names.</li><li><span style="font-weight: bold;">Hardlink: </span>Refernce to a file whose refernce count is maintained.</li><ul><li>Deleting file, and accessing <span style="font-style: italic;">hardlink </span>will <span style="font-style: italic;">not </span>lead to error.</li><li>Deleted-file memory is <span style="font-style: italic;">not </span>de-allocated unless all <span style="font-style: italic;">hardlinks </span>are removed.</li></ul><li><span style="font-weight: bold;">Symlink: </span>Reference to a file whose reference count is <span style="font-style: italic;">not </span>maintained.</li><ul><li>Deleting file, and accessing <span style="font-style: italic;">symlink </span>will lead to error.</li></ul></ul><span style="font-weight: bold;"><br>File Operations:<br></span><ul><li>Commonly supported file-operations.</li><li>Many resemble <span style="font-style: italic;">memory operations</span> since file-system is a <span style="font-style: italic;">memory-mapping</span> of physical data.</li><li>Operations resemble operations on <span style="font-style: italic;">nodes</span> of a <span style="font-style: italic;">tree</span></li></ul><ul><li>Operations:<span style="font-weight: bold;"></span></li><ul><li><span style="font-weight: bold;">Create: </span>Creating a new file, allocating memory, putting in proper directory.</li><li><span style="font-weight: bold;">Read: </span>Requires file-name/identifier to see where next file-block should be put in main-memory (using a <span style="font-style: italic;">pointer</span>).</li><li><span style="font-weight: bold;">Write: </span>Requires file-name/identifier to see where the write happens within file (using a <span style="font-style: italic;">pointer</span>)</li><li><span style="font-weight: bold;">Delete:&nbsp;</span>Find the file, de-allocate space, remove it from directory listing.</li><li><span style="font-weight: bold;">Repositiong Access: </span>Read, Write pointer might be the same; it may be 'moved around' or repositioned.</li><li><span style="font-weight: bold;">Truncating: </span>Deleting the file contents, maintain meta-data.</li></ul></ul><span style="font-weight: bold;">File Opening</span><br><ul><li>Each process maintains <span style="font-style: italic;">Open-File</span> table</li><li><span style="font-style: italic;">Open-File </span>table contains reference to elements in <span style="font-style: italic;">Global Open-File table</span></li><li><span style="font-style: italic;">Global Open-File table </span>keeps track of reference count</li><ul><li>File memory cannot be de-allocated (even after <span style="font-style: italic;">deletion</span>) unless refernce count is zero</li></ul><ul><li>Reference count <span style="font-style: italic;">incremented </span>when file is <span style="font-style: italic;">opened </span>by a process</li></ul><ul><li>Reference count decreased when file is <span style="font-style: italic;">closed,</span> or process <span style="font-style: italic;">ends</span></li></ul></ul><span style="font-weight: bold;">File Deletion<br></span><ul><li>Simply <span style="font-style: italic;">removes</span> file-entry from directory-listing.</li><li>Modern OSes will move file to <span style="font-style: italic;">special location</span> (<span style="font-style: italic;">i.e.</span> recycle bin etc.)</li><li>File-memory may not be de-allocate unless <span style="font-style: italic;">Hardlinks </span>are removed.</li></ul><span style="font-weight: bold;">Directories:<br></span><ul><li>Special files storing mapping of directory-entry <span style="font-style: italic;">identifiers </span>to <span style="font-style: italic;">file-names.</span>&nbsp;</li><li>Support some common operations:</li><ul><li><span style="font-weight: bold;">Search: </span>Searching for a file/entry within directory.</li><li><span style="font-weight: bold;">Add&nbsp;File: </span>Storing new files into&nbsp;directory.</li><li><span style="font-weight: bold;">Remove File: </span>Removing files from the directory</li><li><span style="font-weight: bold;">List Entries:&nbsp;</span>Return a list of directory-entries.</li><li><span style="font-weight: bold;">Rename File:&nbsp;</span>Rename a file-name given the&nbsp;<span style="font-style: italic;">identifier.</span></li><li><span style="font-weight: bold;">Navigate Sub/Parent Directories:&nbsp;</span>Allow accessing children-directories, parent-directories.</li></ul></ul><span style="font-weight: bold;">&nbsp;<br>File-Permissions:</span> Control various types of file access.<ul><li><span style="font-weight: bold;">UNIX Style:</span></li><ul><li>Permissions represented using 10 bits in form: <span style="font-family: Courier New,Courier,monospace;">d rwx rwx rwx</span></li><li><span style="font-weight: bold;">1st Bit:</span> represents whether file is a&nbsp;<span style="font-style: italic;">directory</span></li><li><span style="font-weight: bold;">2nd to 4th Bits:</span> Read, Write, Execute permissions for <span style="font-style: italic;">Owner.</span></li><li><span style="font-weight: bold;">5th to 7th Bits:</span> Read, Write, Execute permissions for <span style="font-style: italic;">Group.</span></li><li><span style="font-weight: bold;">8th to 10th Bits:</span> Read, Write, Execute permissions for <span style="font-style: italic;">Everyone</span>.</li><li><span style="font-style: italic;">e.g. </span><span style="font-family: Courier New,Courier,monospace;">-rwx-r-----</span> means:</li><ul><li>File is <span style="font-style: italic;">not</span> a directory</li><li><span style="font-style: italic;">Owner</span> has read, write, and execute permissions</li><li><span style="font-style: italic;">Group</span> has read permission</li><li><span style="font-style: italic;">Everyone</span> else has <span style="font-style: italic;">no</span> permissions.</li></ul><li>Last <span style="font-style: italic;">9 bits</span> can be represented in <span style="font-weight: bold;">Octal</span>:</li><ul><li>Put <span style="font-style: italic;">r = 4, w = 2, x = 1</span> and sum to get octal representation of each 3-bit group.</li></ul></ul><li><span style="font-weight: bold;">Access Control Lists:</span></li><ul><li>Tuples of <span style="font-style: italic;">&lt;user_name, permission&gt;</span></li></ul><ul><li><span style="font-weight: bold;">Default Deny:&nbsp;</span><span style="font-weight: bold;"></span>Requires explicit allowing to allow accessing.</li><li><span style="font-weight: bold;">Default Allow: </span>Requires explicit denying to prevent<span style="font-weight: bold;"> </span>access.</li></ul><ul><li><span style="font-weight: bold;">Inheritnce:</span></li><ul><li>Files in a directory <span style="font-style: italic;">inherit </span>the parent's list</li><li>Files <span style="font-style: italic;">moved into </span>the directory maintain their <span style="font-style: italic;">original </span>list.</li><ul><li><span style="font-style: italic;">Explicit</span> change to current directory's list required.</li></ul></ul></ul></ul>.<span style="font-weight: bold;"><br></span><span style="font-weight: bold;"></span></body></html>