<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head><meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>lecture_24</title></head>
<body><h1><span style="font-weight: bold;">Virtual Memory II</span></h1><h2><span style="font-weight: bold;">Allocation of Frames</span></h2><span style="font-weight: bold;">Limits to Allocations:</span><br><ul><li><span style="font-weight: bold;">Maximum:&nbsp;</span>Maximum frames used by process depends upon total available frames, and frames used by the OS.</li><li><span style="font-weight: bold;">Minimum: </span>Minimum frames depend upon system implementation.</li></ul><span style="font-weight: bold;">Initial Allocations:</span> We can choose how many frames does a process begin with.<br><span style="font-weight: bold;"><br>NOTE: </span>There are total of <span style="font-style: italic;">m </span>frames in the system, and OS uses <span style="font-style: italic;">k </span>frames.<br><ul style="font-weight: bold;"><li>Equal Allocation:</li><ul><li style="font-weight: normal;">If there are <span style="font-style: italic;">n </span>processes, each one gets equal frames.</li><li><span style="font-weight: normal;">Each process gets <span style="font-style: italic;">(m-k)/n </span>frames to start with.</span></li></ul><li>Proportional Allocation:</li><ul><li style="font-weight: normal;">If s_i is the virtual-memory size of i-th process, then <span style="font-style: italic;">S = sum(s_i)</span></li><li><span style="font-weight: normal;">Each process gets<span style="font-style: italic;"> a_i = s_i/S * (m-k)</span> frames</span></li></ul></ul><span style="font-weight: bold;">Allocation Management:</span><br><ul><li><span style="font-weight: bold;">Local Algorithm: </span>Each process owns a fixed number of frames.</li><li><span style="font-weight: bold;">Global Algorithm:</span></li><ul><li><span style="font-weight: bold;"></span>Each process owns a non-constant number of frames dependent on PFF (Page Fault Frequency)</li><li>Higher the PFF, more the frames owned.</li></ul></ul><h2><span style="font-weight: bold;">Thrashing</span></h2><span style="font-weight: bold;">Thrashing Cascade:</span>&nbsp;<br><ul style="font-weight: bold;"><li>Global Algorithm:</li><ul><li><span style="font-weight: normal;">Assume a system running multiple processes.</span></li><li><span style="font-weight: normal;">A process moves out of its locality/locale, causing a high PFF (Page Fault Frequency).</span></li><li><span style="font-weight: normal;">High-PFF process takes pages from other processes.</span></li><li><span style="font-weight: normal;"><span style="font-style: italic;">Sometimes, </span>this will lead to the other process having too few frames, causing<span style="font-weight: bold;"> </span>it to have a high-PFF too.</span></li><li><span style="font-weight: normal;">Overall CPU utilization reduces due to excessive total PFF, CPU runs more processes.</span></li><li><span style="font-weight: normal;">New processes require a minimum number of frames - taken from the frames of already-running processes, causing even higher PFF<span style="font-weight: bold;">.</span></span></li><li><span style="font-weight: normal;">Steady-state of system is Thrashing<span style="font-weight: bold;">.<br></span></span></li></ul><li>Local Algorithm:</li><ul><li><span style="font-weight: normal;">Assume system running mutiple processes.</span></li><li><span style="font-weight: normal;">A process moves out its locale, causing high PFF.</span></li><li><span style="font-weight: normal;">DMA is busy, and requests from other process start queue-ing, causing many processes to be blocked for a long duration.</span></li><li><span style="font-weight: normal;">Since CPU utilization is low, more processes are launched - making DMA even busier.</span></li><li><span style="font-weight: normal;">Cycle repeats, and the system keeps Thrashing.<br></span></li></ul></ul><span style="font-weight: bold;">Preventing Cascade:</span><br><ul><li><span style="font-weight: normal;">Checking PFF before reducing/increasing number of running processes.</span></li><li><span style="font-weight: normal;">Give frames to the processes based on the size of their <span style="font-weight: bold;">current</span> locale.<br></span></li></ul><h2><span style="font-weight: bold;">Working-Set Model</span></h2><span style="font-weight: bold;">Operation</span><ul><li><span style="font-weight: normal;">Most memory accesses are local.</span></li><li><span style="font-weight: normal;">A process will have <span style="font-style: italic;">n </span>frames allocated to it.<br></span></li><li><span style="font-weight: normal;">Last <span style="font-style: italic;">n </span>recently used pages will be part of the <span style="font-style: italic;">working-set.</span></span></li><ul><li><span style="font-weight: normal;">A page not used since last <span style="font-style: italic;">n </span>memory<span style="font-style: italic;"> </span>accesses<span style="font-style: italic;"> </span>will be removed from <span style="font-style: italic;">working-set</span><span style="font-style: italic;"></span></span></li></ul></ul><span style="font-weight: bold;">Precautions</span>: Too small a value of Working Set will lead to the entire locale&nbsp;<span style="font-style: italic;">not&nbsp;</span>being in main-memory<span style="font-weight: bold;"><br> </span></body></html>