<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head><meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>lecture_21</title></head><body><h1>Segmentation and Paging</h1><ul><li><span style="font-weight: bold;">Segmentation:</span></li><ul><li><span style="font-weight: bold;"></span>Divide process memory into&nbsp;<span style="font-style: italic;">segments&nbsp;</span>based on their functionality.</li></ul><ul><li><span style="font-style: italic;">Segment Table </span>holds <span style="font-style: italic;">base </span>(segment start address)<span style="font-style: italic;"> </span>and <span style="font-style: italic;">limit </span>(segment size) registers.</li><li>Logical memory request has format <span style="font-style: italic;">&lt;segment, offset&gt;</span></li><ul><li>Request successful if <span style="font-style: italic;">offset &lt; limit, </span>otherwise <span style="font-style: italic;">segmentation fault.</span></li></ul></ul><li><span style="font-weight: bold;">Paging:</span></li><ul><li>Divide <span style="font-style: italic;">main memory </span>into fixed-size&nbsp;<span style="font-style: italic;">Frames </span>(<span style="font-style: italic;">generally</span> powers of 2)<span style="font-style: italic;">.</span></li><li>Divide processes' memory into <span style="font-style: italic;">frame</span>-sized<span style="font-style: italic;"> </span>chunks<span style="font-weight: bold;"> </span>called <span style="font-style: italic;">Pages </span>(<span style="font-style: italic;">generally</span> ~4KB)<span style="font-style: italic;">.</span></li><li>Logical memory request has format <span style="font-style: italic;">&lt;page, offset&gt;</span></li><li><span style="font-style: italic;">Process Page Table</span>s stored by a process track in which&nbsp;<span style="font-style: italic;">Frames&nbsp;</span>processes'&nbsp;<span style="font-style: italic;">Pages&nbsp;</span>are stored.</li><li><span style="font-style: italic;">Process Table </span>stored in main memory containing [<span style="font-style: italic;">page, frame</span>] entries.</li><ul><li><span style="font-style: italic;">Page Tables</span> are <span style="font-style: italic;">very </span>long; require optimizations.</li></ul><ul><li><span style="font-weight: bold;">Shared Pages:</span></li><ul><li>Multiple processes of same program often run together.</li><li>Possible if program code <span style="font-style: italic;">non-reentrant </span>(i.e. stateless because of no <span style="font-style: italic;">static </span>or <span style="font-style: italic;">global </span>variable usage).</li><li>Processes<span style="font-style: italic;"><span style="font-style: italic;"> </span></span>storing common-code can share <span style="font-style: italic;">Pages</span>.</li></ul></ul></ul><ul><li><span style="font-weight: bold;">Page Table Structure</span></li><ul><li><span style="font-weight: bold;">Hierarchical:&nbsp;</span></li><ul><li><span style="font-weight: bold;"></span>Table contains&nbsp;<span style="font-style: italic;">outer-page&nbsp;</span>entries, which contains&nbsp;<span style="font-style: italic;">inner-page&nbsp;</span>table</li><li>If <span style="font-style: italic;">p </span>bits used for <span style="font-style: italic;">page </span>address, then <span style="font-style: italic;">p-k </span>used to <span style="font-style: italic;">outer-page, <span style="font-style: italic;">k </span></span>used for <span style="font-style: italic;">inner-page</span></li></ul><li><span style="font-weight: bold;">Hashed (with Linked-Lists):<span style="font-style: italic;">&nbsp;</span></span></li><ul><li><span style="font-style: italic;">page address</span> used as hash-value</li><li><span style="font-style: italic;">Page</span> is searched for in the Linked-list using <span style="font-style: italic;">page address</span><span style="font-weight: bold;"><br></span></li></ul><li><span style="font-weight: bold;">Inverted:</span></li><ul><li>Replace <span style="font-style: italic;">page table</span><span style="font-weight: bold;"><span style="font-style: italic;"> </span></span>with<span style="font-style: italic;"> frame table</span><span style="font-weight: bold;"><span style="font-style: italic;"></span>.</span></li><ul><li><span style="font-style: italic;">frame</span><span style="font-weight: bold;"> </span><span style="font-style: italic;">table </span>maps&nbsp;<span style="font-style: italic;">frame number&nbsp;</span>to&nbsp;<span style="font-style: italic;">page number&nbsp;</span>(and <span style="font-style: italic;">Process ID</span>)&nbsp;</li></ul><li>Required to search <span style="font-style: italic;">entire </span>frame table (<span style="font-style: italic;">very</span>, <span style="font-style: italic;">very</span> slow)</li><ul><li>Operation can be <span style="font-style: italic;">optimized</span> using hardware optimizations<span style="font-weight: bold;"></span></li></ul></ul></ul><li><span style="font-weight: bold;">Hardware Support using Translation Lookaside Buffer</span>:<span style="font-weight: bold;"></span></li><ul><li>Simply a <span style="font-style: italic;">cache </span>for <span style="font-style: italic;">page table </span>containing recently used entries</li><li><span style="font-style: italic;">Cache hit </span>means [<span style="font-style: italic;">page, frame</span>] (key-value pair) entry is in cache</li><li><span style="font-style: italic;">Cache miss&nbsp;</span>means entry not in cache; slower main-memory access required to&nbsp;<span style="font-style: italic;">page</span><span style="font-style: italic;"> table.</span></li><ul><li>If &nbsp;<span style="font-style: italic;">page </span>is not in main-memory, <span style="font-style: italic;">page-fault </span>occurrs</li><li><span style="font-style: italic;">page-fault </span>is a <span style="font-style: italic;">trap; </span>process will initiate reading from hard-disk.</li></ul></ul></ul></ul></body></html>